# TestFlight 内部测试指南

## 概述

TestFlight 是苹果官方的测试平台，允许开发者在 App Store 正式发布前邀请用户测试应用。本指南将详细说明如何设置和使用 TestFlight 进行内部测试。

## 前提条件

### 开发者端
- ✅ 拥有 Apple Developer Program 会员资格
- ✅ 应用已通过 Xcode Cloud 或手动上传到 App Store Connect
- ✅ 构建版本处理完成（显示为可用状态）

### 测试者端
- ✅ 拥有 iPhone/iPad 设备（iOS 13.0 或更高版本）
- ✅ 从 App Store 下载并安装 TestFlight 应用
- ✅ 拥有有效的 Apple ID

## 第一部分：开发者设置 TestFlight

### 1. 登录 App Store Connect

1. 访问 [App Store Connect](https://appstoreconnect.apple.com)
2. 使用你的 Apple Developer 账号登录
3. 选择你的应用（SafeDriverNote）

### 2. 检查构建版本

1. 点击「TestFlight」标签页
2. 在左侧选择「iOS」
3. 确认你的最新构建版本显示为「准备提交」状态
4. 如果状态是「处理中」，需要等待苹果处理完成（通常 10-30 分钟）

### 3. 设置内部测试

#### 创建内部测试组（如果还没有）

1. 在 TestFlight 页面，点击左侧「内部测试」
2. 点击「创建组」或使用默认的「App Store Connect 用户」组
3. 输入组名称，如：「SafeDriverNote 内部测试组」
4. 添加描述（可选）

#### 添加内部测试者

1. 点击刚创建的测试组
2. 点击「测试者」标签页
3. 点击「+」添加测试者
4. 输入测试者的 Apple ID 邮箱地址
5. 选择测试者在 App Store Connect 中的角色：
   - **Admin**：完全访问权限
   - **App Manager**：应用管理权限
   - **Developer**：开发权限
   - **Marketing**：营销权限
   - **Sales**：销售权限

> **注意**：内部测试者必须是你 App Store Connect 团队的成员

#### 选择测试构建版本

1. 在测试组页面，点击「构建版本」标签页
2. 点击「+」添加构建版本
3. 选择你要测试的构建版本
4. 添加测试说明（推荐）：

```
测试版本 1.0 (1)

本次测试重点：
• 首次安装和设置流程
• 基本功能验证（日志记录、检查清单、知识学习）
• 界面适配和用户体验
• 定位和语音功能

已知问题：
• 无

测试反馈请发送至：your-email@example.com
```

5. 点击「下一步」并「提交以供审核」

### 4. 等待审核通过

- 内部测试通常几分钟内就会通过
- 你会收到邮件通知审核结果

## 第二部分：测试者安装和使用

### 1. 安装 TestFlight 应用

测试者需要先安装官方 TestFlight 应用：

1. 在 iPhone/iPad 上打开 App Store
2. 搜索「TestFlight」
3. 下载并安装（免费应用）

### 2. 接收测试邀请

测试者会收到两种邀请方式之一：

#### 方式一：邮件邀请

1. 测试者会收到标题为「您受邀在 TestFlight 上测试 SafeDriverNote」的邮件
2. 点击邮件中的「在 TestFlight 中查看」按钮
3. 会自动打开 TestFlight 应用

#### 方式二：邀请码

如果开发者分享了邀请码：

1. 在 TestFlight 应用中点击「兑换」
2. 输入邀请码
3. 点击「兑换」

### 3. 安装测试版本

1. 在 TestFlight 中找到「SafeDriverNote」
2. 点击「安装」按钮
3. 等待应用下载和安装完成
4. 安装完成后，应用图标会出现在主屏幕上，带有橙色的「Beta」标识

### 4. 开始测试

1. 点击应用图标启动应用
2. 按照测试说明进行功能测试
3. 注意记录遇到的问题和建议

## 第三部分：测试反馈

### 1. 通过 TestFlight 反馈

1. 在 TestFlight 应用中找到 SafeDriverNote
2. 点击应用进入详情页
3. 点击「发送 Beta 版反馈」
4. 选择反馈类型：
   - **问题**：报告 bug 或错误
   - **崩溃**：应用崩溃报告
   - **建议**：功能建议或改进意见
5. 详细描述问题，包括：
   - 问题出现的步骤
   - 预期行为 vs 实际行为
   - 设备型号和 iOS 版本
   - 屏幕截图（如果有帮助）

### 2. 通过其他渠道反馈

你也可以通过以下方式收集反馈：

- **邮件**：设置专门的测试反馈邮箱
- **微信群**：创建测试者微信群
- **在线表单**：使用腾讯问卷等工具
- **项目管理工具**：如 Notion、Trello 等

### 反馈模板

建议为测试者提供统一的反馈模板：

```
【测试反馈】SafeDriverNote v1.0

设备信息：
- 设备型号：iPhone 14 Pro
- iOS 版本：17.0
- 应用版本：1.0 (1)

问题类型：□ 功能问题  □ 界面问题  □ 性能问题  □ 崩溃  □ 建议

问题描述：
[详细描述遇到的问题]

重现步骤：
1. [步骤一]
2. [步骤二]
3. [问题出现]

预期结果：
[应该发生什么]

实际结果：
[实际发生了什么]

优先级：□ 高  □ 中  □ 低

其他信息：
[补充说明、截图等]
```

## 第四部分：管理测试版本

### 1. 查看测试数据

在 App Store Connect 的 TestFlight 页面可以查看：

- **安装数据**：下载次数、活跃用户
- **崩溃报告**：自动收集的崩溃日志
- **反馈**：测试者提交的反馈
- **分析数据**：使用情况统计

### 2. 发布新版本

当你修复了问题并上传新构建版本时：

1. 在 TestFlight 中添加新的构建版本
2. 更新测试说明，注明：
   - 修复的问题
   - 新增的功能
   - 本次测试重点
3. 测试者会收到更新通知

### 3. 测试版本管理

- **版本有效期**：TestFlight 构建版本有效期为 90 天
- **测试者限制**：内部测试者最多 100 人，外部测试者最多 10,000 人
- **构建版本数量**：可以同时提供多个构建版本供测试

## 第五部分：常见问题

### Q1: 测试者收不到邀请邮件怎么办？

**解决方案：**
1. 检查垃圾邮件文件夹
2. 确认邮箱地址正确
3. 确认测试者的 Apple ID 状态正常
4. 重新发送邀请

### Q2: TestFlight 应用中看不到测试版本？

**解决方案：**
1. 确认测试者已加入测试组
2. 确认构建版本已通过审核
3. 刷新 TestFlight 应用
4. 重新登录 Apple ID

### Q3: 安装时提示"无法安装"？

**解决方案：**
1. 检查设备存储空间
2. 确认 iOS 版本兼容性
3. 重启设备后重试
4. 检查网络连接

### Q4: 如何移除测试者？

**操作步骤：**
1. 在 App Store Connect 中找到测试组
2. 点击测试者名称
3. 点击「移除」按钮

### Q5: 测试版本会影响 App Store 版本吗？

**回答：** 不会。TestFlight 测试版本和 App Store 正式版本是完全独立的，测试不会影响正式版本的发布。

## 第六部分：最佳实践

### 1. 测试计划

建议制定详细的测试计划：

```
SafeDriverNote 测试计划 v1.0

测试目标：
• 验证核心功能稳定性
• 收集用户体验反馈
• 发现潜在问题

测试范围：
□ 用户注册和设置
□ 日志记录功能
□ 检查清单功能
□ 知识学习功能
□ 语音和定位功能
□ 数据同步
□ 界面适配

测试时间：2024年X月X日 - X月X日（1周）

测试者分组：
• 组1：开发团队成员（5人）
• 组2：目标用户代表（10人）
• 组3：设计和产品人员（5人）

成功标准：
• 无严重崩溃问题
• 核心功能正常运行
• 用户体验评分 > 4.0
```

### 2. 版本管理

建议使用语义化版本号：

- **1.0.0 (1)**：首个测试版本
- **1.0.0 (2)**：修复 bug 的版本
- **1.0.1 (3)**：小功能更新
- **1.1.0 (4)**：新功能版本

### 3. 沟通机制

建立清晰的沟通机制：

- **每日站会**：同步测试进度
- **问题追踪**：使用 GitHub Issues 或类似工具
- **周报**：总结测试发现和进展
- **决策会议**：讨论重要问题的解决方案

## 第七部分：外部测试（可选）

如果需要更大范围的测试，可以考虑外部测试：

### 外部测试 vs 内部测试

| 特性 | 内部测试 | 外部测试 |
|-----|---------|---------|
| 测试者数量 | 最多 100 人 | 最多 10,000 人 |
| 测试者要求 | 必须是团队成员 | 任何有 Apple ID 的用户 |
| 审核要求 | 无需审核 | 需要 App Review 团队审核 |
| 审核时间 | 立即可用 | 24-48 小时 |
| 邀请方式 | 邮箱邀请 | 邮箱邀请或公开链接 |

### 设置外部测试

1. 在 TestFlight 页面选择「外部测试」
2. 创建测试组
3. 添加构建版本并提供详细的测试信息
4. 提交审核（需要通过 App Review）
5. 审核通过后可以邀请外部测试者

## 总结

TestFlight 是一个强大的测试平台，正确使用它可以：

1. **提前发现问题**：在正式发布前修复 bug
2. **收集用户反馈**：了解真实用户的使用体验
3. **验证功能**：确保新功能按预期工作
4. **优化性能**：发现并解决性能问题
5. **增强信心**：为正式发布做好充分准备

记住，测试是一个迭代过程。根据反馈持续改进应用，直到达到发布标准。

---

**更多资源：**
- [Apple TestFlight 官方文档](https://developer.apple.com/testflight/)
- [App Store Connect 帮助](https://developer.apple.com/help/app-store-connect/)
- [TestFlight 最佳实践](https://developer.apple.com/testflight/)